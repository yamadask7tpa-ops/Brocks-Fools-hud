local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local KEY_AUTH = "****"
local SPEED = 0.03
local AUTH_STATE = false
local MAIN_COLOR = Color3.fromRGB(0, 255, 170)
local SECONDARY_COLOR = Color3.fromRGB(170, 0, 255)

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NovaScanner_V2"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = player:WaitForChild("PlayerGui")

local function styleElement(parent, radius, strokeColor)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 10)
    corner.Parent = parent
    
    if strokeColor then
        local stroke = Instance.new("UIStroke")
        stroke.Color = strokeColor
        stroke.Thickness = 1.5
        stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
        stroke.Parent = parent
        return stroke
    end
end

local function addHover(btn)
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.3), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.3), {BackgroundColor3 = Color3.fromRGB(20, 20, 20)}):Play()
    end)
end

local loginFrame = Instance.new("Frame")
loginFrame.Size = UDim2.new(0, 280, 0, 180)
loginFrame.Position = UDim2.new(0.5, -140, 0.5, -90)
loginFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
loginFrame.Parent = screenGui
styleElement(loginFrame, 12, MAIN_COLOR)

local loginTitle = Instance.new("TextLabel")
loginTitle.Size = UDim2.new(1, 0, 0, 40)
loginTitle.BackgroundTransparency = 1
loginTitle.Text = "Brocks Fools Keyless"
loginTitle.TextColor3 = Color3.new(1, 1, 1)
loginTitle.Font = Enum.Font.GothamBold
loginTitle.TextSize = 16
loginTitle.Parent = loginFrame

local keyInput = Instance.new("TextBox")
keyInput.Size = UDim2.new(0, 220, 0, 35)
keyInput.Position = UDim2.new(0.5, -110, 0.4, 0)
keyInput.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
keyInput.PlaceholderText = "Enter Access Key..."
keyInput.Text = ""
keyInput.TextColor3 = Color3.new(1,1,1)
keyInput.Parent = loginFrame
styleElement(keyInput, 6, Color3.fromRGB(50,50,50))

local authBtn = Instance.new("TextButton")
authBtn.Size = UDim2.new(0, 220, 0, 40)
authBtn.Position = UDim2.new(0.5, -110, 0.7, 0)
authBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
authBtn.Text = "inject"
authBtn.TextColor3 = MAIN_COLOR
authBtn.Font = Enum.Font.GothamBold
authBtn.Parent = loginFrame
styleElement(authBtn, 6, MAIN_COLOR)
addHover(authBtn)

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 200, 0, 150)
mainFrame.Position = UDim2.new(0.5, -100, -0.5, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.Visible = false
mainFrame.Parent = screenGui
local mainStroke = styleElement(mainFrame, 15, MAIN_COLOR)

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new(MAIN_COLOR, SECONDARY_COLOR)
gradient.Parent = mainStroke

local mHeader = Instance.new("Frame")
mHeader.Size = UDim2.new(1, 0, 0, 35)
mHeader.BackgroundTransparency = 1
mHeader.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 1, 0)
title.BackgroundTransparency = 1
title.Text = "Block Fruit Treasure Chest tp hud"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 12
title.Parent = mHeader

local scanBtn = Instance.new("TextButton")
scanBtn.Size = UDim2.new(0, 160, 0, 50)
scanBtn.Position = UDim2.new(0.5, -80, 0.5, 0)
scanBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
scanBtn.Text = "Inject tp"
scanBtn.TextColor3 = MAIN_COLOR
scanBtn.Font = Enum.Font.GothamBold
scanBtn.Parent = mainFrame
local btnStroke = styleElement(scanBtn, 8, MAIN_COLOR)
addHover(scanBtn)

local function makeDraggable(frame, handle)
    local dragging, dragInput, dragStart, startPos
    handle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
end

makeDraggable(loginFrame, loginFrame)
makeDraggable(mainFrame, mHeader)

local farming = false
local function ghostTP()
    while farming do
        for _, v in pairs(workspace:GetDescendants()) do
            if not farming then break end
            local name = v.Name:lower()
            local isTarget = name:find("chest") or name:find("treasure") or name:find("drop")
            local hasTrigger = v:IsA("TouchInterest") or v:IsA("ProximityPrompt")
            
            if isTarget or hasTrigger then
                local target = (v:IsA("TouchInterest") or v:IsA("ProximityPrompt")) and v.Parent or v
                if target:IsA("BasePart") or target:IsA("Model") then
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        local pos = target:IsA("Model") and target:GetPivot().Position or target.Position
                        if pos.Y > -1000 then
                            hrp.CFrame = CFrame.new(pos)
                            task.wait(SPEED)
                        end
                    end
                end
            end
        end
        task.wait(0.1)
    end
end

authBtn.MouseButton1Click:Connect(function()
    if keyInput.Text == KEY_AUTH then
        AUTH_STATE = true
        TweenService:Create(loginFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Position = UDim2.new(0.5, -140, 1.5, 0)}):Play()
        task.wait(0.5)
        loginFrame:Destroy()
        
        mainFrame.Visible = true
        mainFrame:TweenPosition(UDim2.new(0.5, -100, 0.4, -75), "Out", "Back", 0.6, true)
    else
        keyInput.TextColor3 = Color3.new(1, 0, 0)
        task.wait(1)
        keyInput.TextColor3 = Color3.new(1, 1, 1)
    end
end)

scanBtn.MouseButton1Click:Connect(function()
    farming = not farming
    scanBtn.Text = farming and "Injecting tp..." or "INITIALIZE SCAN"
    scanBtn.TextColor3 = farming and Color3.fromRGB(255, 50, 50) or MAIN_COLOR
    btnStroke.Color = farming and Color3.fromRGB(255, 50, 50) or MAIN_COLOR
    if farming then task.spawn(ghostTP) end
end)

task.spawn(function()
    while true do
        for i = 0, 1, 0.005 do
            local col = Color3.fromHSV(i, 0.8, 1)
            gradient.Color = ColorSequence.new(col, Color3.fromHSV((i + 0.2) % 1, 0.8, 1))
            task.wait(0.05)
        end
    end
end)

UserInputService.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.RightControl and AUTH_STATE then
        mainFrame.Visible = not mainFrame.Visible
    end
end)
